<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenLayers基础教程——OL5基本概念 | longger个人博客</title>
    <meta name="description" content="Personal Website">
    <link rel="icon" href="/images/photo.jpg">
  <link rel="manifest" href="/images/photo.jpg">
  <link rel="apple-touch-icon" href="/images/photo.jpg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.47c0e538.css" as="style"><link rel="preload" href="/assets/js/app.ddf169d8.js" as="script"><link rel="preload" href="/assets/js/16.8f7dfb98.js" as="script"><link rel="prefetch" href="/assets/js/10.cf1bc230.js"><link rel="prefetch" href="/assets/js/11.2f5262be.js"><link rel="prefetch" href="/assets/js/12.763b28b8.js"><link rel="prefetch" href="/assets/js/13.9640c310.js"><link rel="prefetch" href="/assets/js/14.6a6b2539.js"><link rel="prefetch" href="/assets/js/15.c91f14b9.js"><link rel="prefetch" href="/assets/js/17.16f901e2.js"><link rel="prefetch" href="/assets/js/18.df3d5f02.js"><link rel="prefetch" href="/assets/js/19.cc75ce38.js"><link rel="prefetch" href="/assets/js/2.81770428.js"><link rel="prefetch" href="/assets/js/20.f365b100.js"><link rel="prefetch" href="/assets/js/21.64605176.js"><link rel="prefetch" href="/assets/js/22.cf712662.js"><link rel="prefetch" href="/assets/js/23.0c81b9b2.js"><link rel="prefetch" href="/assets/js/24.39e614db.js"><link rel="prefetch" href="/assets/js/25.7fe0f933.js"><link rel="prefetch" href="/assets/js/26.a9222ed5.js"><link rel="prefetch" href="/assets/js/27.eb522861.js"><link rel="prefetch" href="/assets/js/28.5b4d4f28.js"><link rel="prefetch" href="/assets/js/29.1e90c05c.js"><link rel="prefetch" href="/assets/js/3.e75cae9a.js"><link rel="prefetch" href="/assets/js/30.ecc167b6.js"><link rel="prefetch" href="/assets/js/31.6b1a5bbc.js"><link rel="prefetch" href="/assets/js/32.52bce39c.js"><link rel="prefetch" href="/assets/js/33.208f971b.js"><link rel="prefetch" href="/assets/js/4.20ce77fb.js"><link rel="prefetch" href="/assets/js/5.5920e34d.js"><link rel="prefetch" href="/assets/js/6.224dfbe4.js"><link rel="prefetch" href="/assets/js/7.d6765f0d.js"><link rel="prefetch" href="/assets/js/8.a144f217.js"><link rel="prefetch" href="/assets/js/9.b9252c8f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.47c0e538.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">longger个人博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/accumulate/git/handleGit.html" class="nav-link">前端</a></div><div class="nav-item"><a href="/baseComponents/Layout/basicLayout.html" class="nav-link">组件文档</a></div><div class="nav-item"><a href="/others/" class="nav-link">诗和远方</a></div><div class="nav-item"><a href="https://www.runoob.com/markdown/md-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Markdown 教程
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/accumulate/git/handleGit.html" class="nav-link">前端</a></div><div class="nav-item"><a href="/baseComponents/Layout/basicLayout.html" class="nav-link">组件文档</a></div><div class="nav-item"><a href="/others/" class="nav-link">诗和远方</a></div><div class="nav-item"><a href="https://www.runoob.com/markdown/md-tutorial.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Markdown 教程
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>git</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>JS高级</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>vue笔记</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Openlayers笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/accumulate/Openlayers/O001.html" class="sidebar-link">智慧园区解决方案中的智慧安防模块</a></li><li><a href="/accumulate/Openlayers/O002.html" class="active sidebar-link">OpenLayers基础教程——OL5基本概念</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h3 id="openlayers基础教程——ol5基本概念"><a href="#openlayers基础教程——ol5基本概念" aria-hidden="true" class="header-anchor">#</a> OpenLayers基础教程——OL5基本概念</h3> <h4 id="一-openlayers核心职责"><a href="#一-openlayers核心职责" aria-hidden="true" class="header-anchor">#</a> 一 .OpenLayers核心职责</h4> <p>OpenLayers最新大版本是openlayers5，它是一个基于h5的GIS前端库，地图渲染方式为Canvas和WebGL，常用Canvas展示二维地图，支持WebGL渲染显示出将来的OpenLayers有支持三维方向的可能。OpenLayers作为一个地图前端库主要负责GIS数据的展示与交互。OpenLayers仅仅是开源GIS框架中的前端部分，并不等于是GIS系统，所以很多非GIS专业的前端使用OpenLayers常常会出现很多误区，如社区中每隔几天就有人问的问题：</p> <ol><li>请问怎样用ol加载几百万点啊？我现在加载了感觉很卡。</li> <li>请问ol能实现路径分析吗？ol能实现缓冲区分析吗？</li></ol> <p>提问的人忽略了ol的核心职责是展示与交互，实际项目中也不可能有将几千万几百万数据推到前端展示和交互的，一般这种都是后端渲染图刷到前端展示，或者使用矢量切片抽希数据到前端展示，正如普通的web开发中的表单需要分页查询和分页展示是一个道理。至于分析一般是服务端或者空间数据库负责分析，分析结果提交前端展示。业务常常是复杂的，但是每个工具的职责是清晰的，请将复杂的业务交由正确的工具去完成！</p> <h4 id="二-openlayers的定位"><a href="#二-openlayers的定位" aria-hidden="true" class="header-anchor">#</a> 二 OpenLayers的定位</h4> <p>GIS前端渲染库除了OpenLayers还有LeafLet和ESRI公司的ArcGIS API，同样能支持地图的前端库还有百度api，高德api，谷歌api等，还有Echarts，D3.js等，初学者常常不能理解他们之间的关系。常常听人说，路径分析我就用高德API不就可以了吗？展示数据我用下Echarts不可以吗？仍然是一句话，选择什么样的工具，完全是依据实际业务需求而定的。当前和地图相关的库大概分类如下：</p> <ul><li>在线地图lbs服务：这类库的代表是百度api，高德api，谷歌api，主要特点是：公网环境，开发者需要申请key，key的地图请求服务有次数限制。地图数据和服务都是百度高德提供的，开发者常常是将业务有限的点（几个点，几十个点，几百个点等）定到地图上定个位置。开发中使用它们主要是如招聘网站上公司位置的一个定位，互联网应用中的lbs服务，如各种快递，外卖等app中附近的餐馆影院等。在企业和政府应用中，业务非常复杂，在线地图服务提供的数据不是我们要的，提供的服务不能满足我们的应用，所以实际上基本不会在企业开发中使用。LBS！=GIS。</li> <li>数据可视化库：Echarts，D3.js主要作用是web端实现数据可视化的，提供丰富的图表等展示和交互，由于地图的使用越来越普及，所以不可避免的他们也会支持数据在地图上的展示。但主要定位仍然是数据可视化，在开发中，常常指定某个div，用来展示和交互下数据，属于页面的一小部分业务。而一般的综合指挥调度系统的地图是一个应用，加载非常多的图层，可以随时通过地图向地图单元发送指挥命令。page！=application。</li> <li>GIS地图库:ol,LeafLet,arcgis api等都属于企业级地图应用开发库，彼此之间大同小异。稍微的差异是arcgis api需要arcserver提供服务，离开了server基本没任何优势。leaflet主要优势还是在开发的第三方控件比较多，但是兼容性比较差。且以“体积小，对移动端友好”为著称，在ol2的年代的确如此，但个人认为API的结构不如ol好，且ol3之后版本支持自定义打包，也支持移动端应用，ol4版本实现es6的import语法，实现按需加载，足以胜任开发大型GIS应用的要求。</li></ul> <h4 id="综述：openlayers是gis地图库，定位于开发gis应用，而非地图页面，用于复杂的展示和交互用户数据。"><a href="#综述：openlayers是gis地图库，定位于开发gis应用，而非地图页面，用于复杂的展示和交互用户数据。" aria-hidden="true" class="header-anchor">#</a> 综述：OpenLayers是GIS地图库，定位于开发GIS应用，而非地图页面，用于复杂的展示和交互用户数据。</h4> <h3 id="三-openlayers的主要结构"><a href="#三-openlayers的主要结构" aria-hidden="true" class="header-anchor">#</a> 三 OpenLayers的主要结构</h3> <h4 id="基本概念："><a href="#基本概念：" aria-hidden="true" class="header-anchor">#</a> 基本概念：</h4> <p><img src="https://note.youdao.com/yws/res/641/D3279BF89DCC40E1B5325EF96568B82E" alt="45"></p> <h5 id="_1-map"><a href="#_1-map" aria-hidden="true" class="header-anchor">#</a> 1. map</h5> <p>OpenLayers 5的核心部件是Map（ol.Map）。它被呈现到对象target容器（例如，包含在地图的网页上的div元素）。所有地图的属性可以在构造时进行配置，或者通过使用setter方法，如setTarget（）。OpenLayers 3的核心部件是Map（ol.Map）。它被呈现到对象target容器（例如，包含在地图的网页上的div元素）。所有地图的属性可以在构造时进行配置，或者通过使用setter方法，如setTarget（）。
<img src="https://note.youdao.com/yws/res/644/3238794287EA40AD893F00FA009B9C5F" alt="46"></p> <h4 id="_2-view"><a href="#_2-view" aria-hidden="true" class="header-anchor">#</a> 2. View</h4> <p>ol. View负责地图的中心点，放大，投影之类的设置。</p> <p>一个ol.View实例包含投影projection，该投影决定中心center 的坐标系以及分辨率的单位，如果没有指定（如下面的代码段），默认的投影是球墨卡托（EPSG：3857），以米为地图单位。</p> <p>放大zoom 选项是一种方便的方式来指定地图的分辨率，可用的缩放级别由maxZoom （默认值为28）、zoomFactor （默认值为2）、maxResolution （默认由投影在256×256像素瓦片的有效成都来计算） 决定。起始于缩放级别0，以每像素maxResolution 的单位为分辨率，后续的缩放级别是通过zoomFactor区分之前的缩放级别的分辨率来计算的，直到缩放级别达到maxZoom ！</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>map<span class="token punctuation">.</span><span class="token function">setView</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>View</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    center<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    zoom<span class="token punctuation">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_3、source"><a href="#_3、source" aria-hidden="true" class="header-anchor">#</a> 3、Source</h4> <p>OpenLayers 3使用ol.source.Source子类获取远程数据图层，包含免费的和商业的地图瓦片服务，如OpenStreetMap、Bing、OGC资源（WMS或WMTS）、矢量数据（GeoJSON格式、KML格式…）等</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> osmSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>source<span class="token punctuation">.</span>OSM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_4、layer"><a href="#_4、layer" aria-hidden="true" class="header-anchor">#</a> 4、Layer</h4> <p>一个图层是资源中数据的可视化显示，OpenLayers 3包含三种基本图层类型：ol.layer.Tile、ol.layer.Image 和 ol.layer.Vector。</p> <ol><li>ol.layer.Tile 用于显示瓦片资源，这些瓦片提供了预渲染，并且由特定分别率的缩放级别组织的瓦片图片网格组成。</li> <li>ol.layer.Image用于显示支持渲染服务的图片，这些图片可用于任意范围和分辨率。</li> <li>ol.layer.Vector用于显示在客户端渲染的矢量数据。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> osmLayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>Tile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>source<span class="token punctuation">:</span> osmSource<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>osmLayer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="总结："><a href="#总结：" aria-hidden="true" class="header-anchor">#</a> 总结：</h4> <p>上述片段可以合并成一个自包含视图和图层的地图配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;map&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;width: 100%, height: 400px&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    layers<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>Tile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>source<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>source<span class="token punctuation">.</span>OSM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    view<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">ol<span class="token punctuation">.</span>View</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      center<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      zoom<span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    target<span class="token punctuation">:</span> <span class="token string">'map'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><a href="https://blog.csdn.net/GISShiXiSheng/article/details/46756275" target="_blank" rel="noopener noreferrer">OpenLayers基础教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.jianshu.com/p/e693711a7008" target="_blank" rel="noopener noreferrer">OpenLayers核心职责<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://weilin.me/ol3-primer/ch01/index.html" target="_blank" rel="noopener noreferrer">OpenLayers 3 介绍<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/zjr201213136039/article/details/84721464" target="_blank" rel="noopener noreferrer">openlayers5部分使用细节<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/accumulate/Openlayers/O001.html" class="prev">
          智慧园区解决方案中的智慧安防模块
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.ddf169d8.js" defer></script><script src="/assets/js/16.8f7dfb98.js" defer></script>
  </body>
</html>
